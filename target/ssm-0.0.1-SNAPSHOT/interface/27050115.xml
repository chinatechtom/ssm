<?xml version="1.0" encoding="gbk" ?>
<function id="27050115" name="单客户单只证券持仓集中度统计" >
  <input>
    <item type="select" id="institution_id" name="营业部"   source="95000008"/>
    <item type="text"   id="cust_code"      name="客户代码"/>
    <item type="date"   id="query_date"     name="查询日期" nullable="false"/>
    <item type="select" id="market_code"    name="市场代码" source="039"/>
    <item type="text"   id="product_code"   name="证券代码"/>
    <item type="text"   id="rate1"   name="市值集中度阀值(%)"/>
    <item type="text"   id="rate2"   name="资产集中度阀值(%)"/>
    <item type="text"   id="n"   name="前N个交易日"/>
  </input>
  <service type="procedure" id="p27050115" implement="p2705011527050115" process="955" style="77">
    <param id="user_id"        type="ingeter"	way="in"/>
    <param id="institution_id" type="ingeter"	way="in"/>
    <param id="cust_code"      type="string"	way="in"/>
    <param id="query_date"     type="string"	way="in"/>
    <param id="market_code"    type="string"	way="in"/>
    <param id="product_code"   type="string"	way="in"/>
    <param id="rate1"          type="float"   way="in"/>
    <param id="rate2"          type="float"   way="in"/>
    <param id="n"              type="ingeter"	way="in"/>
  </service>
  <output print="true">
    <column id="institution_code" name="营业部代码" type="string" />
    <column id="institution_name" name="营业部名称" type="string" />
    <column id="cust_code"        name="客户代码"   type="string" />
    <column id="cust_name"        name="客户名称"   type="string" />
    <column id="fund_amt"         name="资金"   type="number" precision="2" total="true"/>
    <column id="stock_amt"        name="证券总市值" type="number" precision="2" total="true"/>
    <column id="total_asset"      name="合计"   type="number" precision="2" total="true"/>
    <column id="product_code"     name="单只证券代码"/>
    <column id="product_name"     name="单只证券名称"/>
    <column id="one_stock_qty"    name="单只证券数量" type="number" precision="0" total="true"/>
    <column id="one_stock_amt"    name="单只证券市值" type="number" precision="2" total="true"/>
    <column id="one_accept_qty"   name="可接受单只证券数量" type="number" precision="0" total="true"/>
    <column id="one_accept_amt"   name="可接受单只证券市值" type="number" precision="2" total="true"/>
    <column id="stock_convert_rate"     name="折算率%"   type="number" precision="2" />
    <column id="one_accept_convert_amt"            name="可接受单只证券价值" type="number" precision="2" total="true"/>
    <column id="rate1"            name="该证券市值占该客户证券总市值%" type="number" precision="2" />
    <column id="rate2"            name="该证券市值占该客户总资产%" type="number" precision="2" />
    <column id="rate3"            name="该证券市值占公司此证券总市值%" type="number" precision="2" />
    <column id="rate4"            name="可接受该证券价值占该客户融资负债%" type="number" precision="2" />
    <column id="rate5"            name="可接受该证券价值占公司此证券可接受总价值%" type="number" precision="2" />
    <column id="rate6"            name="可接受该证券价值占市场此证券前n个交易日的交易量%" type="number" precision="2" />
    <column id="rate7"            name="可接受该证券价值占市场此证券流通市值%" type="number" precision="2" />
  </output>
</function>