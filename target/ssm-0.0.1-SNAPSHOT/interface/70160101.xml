<?xml version="1.0" encoding="gbk" ?>
<function id="70160101" name="交易协议书查询" >
  <input>
	<item type="select" id="institution_id" name="营业部名称" source="97000001"/>
 	<item type="hidden" id="cust_id" name="客户id"/>
	<item type="text" id="cust_code" name="客户代码" />
	<item type="text" id="cust_name" name="客户姓名"/>
	<item type="select" id="cust_type" name="客户类型" source="027"/>
	<item type="date" id="begin_date" name="起始日期"/>
	<item type="date" id="end_date" name="结束日期"/>
	<item type="select" id="trade_type" name="交易类型" source="724"/>
	<item type="select" id="bb_type" name="履约类型" source="725"/>
	<item type="select" id="sbond_status" name="交易协议书状态" source="700"/>
  </input>
  <service type="procedure" id="P70160101" process="922" style="77">
	<param type="integer" id="user_id"/>	
	<param type="integer" id="institution_id"/>
 	<param type="integer" id="cust_id"/>
	<param type="string"  id="cust_code"/>
	<param type="string"  id="cust_name"/>
	<param type="string"  id="cust_type"/>
	<param type="string"  id="begin_date"/>
	<param type="string"  id="end_date"/>
	<param type="string"  id="trade_type"/>
	<param type="string"  id="bb_type"/>
	<param type="string"  id="sbond_status"/>
  </service>
  <output  export="true">  
    <column type="number" id="institution_id"   name="机构号" display="false"/>	
	<column type="string" id="institution_name"   name="营业部名称"/>
	<column type="string" id="institution_code"   name="营业部代码"/>
  	<column type="number" id="cust_id"   name="客户id"  display="false"/>	
	<column type="string" id="cust_code"   name="客户代码" />
	<column type="string" id="cust_name"   name="客户姓名" />
	<column type="string" id="cust_type"   name="客户类型" />
	<column type="number" id="bond_id"   name="合同id"   display="false"/>
    <column type="string" id="bond_no"   name="合同编号" />
	<column type="number" id="bond_status"	name="合同状态" display="false"/>	
	<column type="string" id="bond_status_name"	name="合同状态"/>
	<column type="number" id="sbond_id"   name="交易协议书id" display="false"/>     
	<column type="string" id="sbond_no"   name="交易协议书编号" />
	<column type="string" id="sbond_status"   name="交易协议书状态"/>
	<column type="integer" id="product_id"   name="productid" display="false"/>
	<column type="string" id="market_code"   name="市场代码" display="false"/>
	<column type="string" id="market_code_name"   name="市场代码"/>
	<column type="string" id="product_code"   name="标的证券代码"/>
	<column type="string" id="product_name"   name="标的证券名称"/>
	<column type="string" id="product_type"   name="标的证券类型"/>
	<column type="number" id="hg_num"   name="标的证券数量" precision="0"/>
	<column type="number" id="first_amt"   name="初始交易金额" precision="2"/>
	<column type="number" id="hg_rate"   name="购回价格(每100元年收益)" precision="4"/>
	<column type="string" id="engage_trade_date"   name="初始交易日期"/>
	<column type="number" id="days"   name="购回期限(天)"/>
	<column type="string" id="bb_date"   name="原购回交易日期"/>
	<column type="number" id="days2"   name="变更后购回期限(天)"/>
	<column type="string" id="last_bb_date"   name="变更后购回交易日期"/>
	<column type="number" id="second_amt"   name="购回交易金额" precision="2"/>
	<column type="number" id="second_amt2"   name="变更后购回交易金额" precision="2"/>
	<column type="string" id="trade_type"   name="交易类型"/>
	<column type="string" id="bb_type"   name="履约类型"/>
	<column type="string" id="related_sbond_no"   name="关联(主)交易协议书编号" />
  </output>
</function>